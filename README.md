# BPM ELF é–‹å–®å°å¹«æ‰‹

ä¸€å€‹åŸºæ–¼ React å’Œ Next.js çš„æ¥­å‹™æµç¨‹ç®¡ç†ï¼ˆBPMï¼‰å‰ç«¯æ‡‰ç”¨ç¨‹å¼ï¼Œæä¾›å‹•æ…‹è¡¨å–®ç”Ÿæˆå’Œ Chrome ç€è¦½å™¨æ“´å……åŠŸèƒ½æ”¯æ´ã€‚

## å°ˆæ¡ˆæ¦‚è¿°

BPM ELF é–‹å–®å°å¹«æ‰‹æ˜¯ä¸€å€‹ä¼æ¥­ç´šçš„è¡¨å–®ç®¡ç†ç³»çµ±ï¼Œæ”¯æ´ï¼š
- å‹•æ…‹è¡¨å–®é…ç½®èˆ‡ç”Ÿæˆ
- Web Component æ•´åˆ
- Chrome æ“´å……åŠŸèƒ½æ”¯æ´
- å¤šç’°å¢ƒéƒ¨ç½²é…ç½®

## ä¸»è¦åŠŸèƒ½

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½
- **å‹•æ…‹è¡¨å–®ç”Ÿæˆ**ï¼šåŸºæ–¼ JSON é…ç½®è‡ªå‹•ç”Ÿæˆè¡¨å–®ä»‹é¢
- **Web Component**ï¼šå¯åµŒå…¥ä»»ä½•ç¶²é çš„ç¨ç«‹çµ„ä»¶
- **Chrome æ“´å……åŠŸèƒ½**ï¼šç€è¦½å™¨åŸç”Ÿæ•´åˆæ”¯æ´
- **å¤šå±¤é¸å–®ç³»çµ±**ï¼šæ”¯æ´è¤‡é›œçš„å°èˆªçµæ§‹

### ğŸ“‹ è¡¨å–®å…ƒç´ 
- æ–‡å­—è¼¸å…¥æ¡† (text.js)
- æ–‡å­—å€åŸŸ (textArea.js) 
- å–®é¸æŒ‰éˆ• (radio.js)
- è¤‡é¸æ¡† (checkbox.js)
- ä¸‹æ‹‰é¸å–® (select.js)
- æè¿°æ–‡å­— (description.js)

### ğŸ¨ UI çµ„ä»¶
- éŸ¿æ‡‰å¼ä½ˆå±€ç³»çµ±
- Bootstrap 5 æ•´åˆ
- Tailwind CSS æ¨£å¼
- Material Tailwind å…ƒä»¶åº«
- React Toastify é€šçŸ¥ç³»çµ±

## æŠ€è¡“æ¶æ§‹

### å‰ç«¯æŠ€è¡“æ£§
- **æ¡†æ¶**ï¼šReact 18.3.1 + Next.js 14.1.4
- **æ¨£å¼**ï¼šTailwind CSS + Bootstrap 5 + Material Tailwind
- **ç‹€æ…‹ç®¡ç†**ï¼šReact Hook Form + Context API
- **å»ºæ§‹å·¥å…·**ï¼šWebpack 5 + Babel
- **å­—é«”**ï¼šInter + Noto Sans TC

### å°ˆæ¡ˆçµæ§‹
```
src/
â”œâ”€â”€ components/          # React çµ„ä»¶
â”‚   â”œâ”€â”€ formElements/   # è¡¨å–®å…ƒç´ çµ„ä»¶
â”‚   â”œâ”€â”€ chromeNavMegaMenu.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ contexts/           # React Context
â”œâ”€â”€ pages/             # Next.js é é¢
â”œâ”€â”€ styles/            # æ¨£å¼æª”æ¡ˆ
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”œâ”€â”€ webComponent.js    # Web Component ä¸»æª”æ¡ˆ
â””â”€â”€ chromeComponent.js # Chrome æ“´å……åŠŸèƒ½çµ„ä»¶

bpm_elf_extension/     # Chrome æ“´å……åŠŸèƒ½æª”æ¡ˆ
â”œâ”€â”€ manifest.json
â”œâ”€â”€ background.js
â””â”€â”€ ...
```

## ç’°å¢ƒè¨­å®šèˆ‡å®‰è£

### ç³»çµ±éœ€æ±‚
- Node.js 18+
- pnpm å¥—ä»¶ç®¡ç†å™¨

### å®‰è£ä¾è³´
```bash
pnpm install
```

### ç’°å¢ƒé…ç½®
å»ºç«‹å°æ‡‰çš„ç’°å¢ƒè®Šæ•¸æª”æ¡ˆï¼š
- `.env.dev.local` - æœ¬åœ°é–‹ç™¼ç’°å¢ƒ
- `.env.dev` - é–‹ç™¼ç’°å¢ƒ
- `.env.stg` - æ¸¬è©¦ç’°å¢ƒ
- `.env.uat` - ä½¿ç”¨è€…é©—æ”¶æ¸¬è©¦ç’°å¢ƒ
- `.env.prod` - æ­£å¼ç’°å¢ƒ

## é–‹ç™¼æŒ‡ä»¤

### æœ¬åœ°é–‹ç™¼
```bash
# å•Ÿå‹•æœ¬åœ°é–‹ç™¼ä¼ºæœå™¨ï¼ˆå«æ†‘è­‰ï¼‰
pnpm run local
```

### å»ºæ§‹æŒ‡ä»¤
```bash
# å»ºæ§‹å„ç’°å¢ƒç‰ˆæœ¬
pnpm run build:dev.local    # æœ¬åœ°é–‹ç™¼ç‰ˆæœ¬
pnpm run build:dev          # é–‹ç™¼ç‰ˆæœ¬
pnpm run build:stg          # æ¸¬è©¦ç‰ˆæœ¬
pnpm run build:uat          # UAT ç‰ˆæœ¬
pnpm run build:prod         # æ­£å¼ç‰ˆæœ¬
```

### Web Component å»ºæ§‹
```bash
# å»ºæ§‹ Web Component
pnpm run build:webcomponent

# å„ç’°å¢ƒ Web Component å»ºæ§‹
pnpm run webcomponent:dev
pnpm run webcomponent:stg
pnpm run webcomponent:uat
pnpm run webcomponent:prod
```

### ç¨‹å¼ç¢¼å“è³ª
```bash
# ESLint æª¢æŸ¥
pnpm run lint
```

## éƒ¨ç½²èªªæ˜

### ç”Ÿç”¢ç’°å¢ƒå•Ÿå‹•
```bash
pnpm start
```

### å»ºæ§‹æµç¨‹
1. **Web Component å»ºæ§‹**ï¼šç·¨è­¯ç¨ç«‹çš„ Web Component
2. **Next.js å»ºæ§‹**ï¼šç”Ÿæˆéœæ…‹ç¶²ç«™æª”æ¡ˆ
3. **ä¼ºæœå™¨å»ºæ§‹**ï¼šæ‰“åŒ…ä¼ºæœå™¨ç›¸é—œæª”æ¡ˆ

### æ†‘è­‰ç®¡ç†
å°ˆæ¡ˆåŒ…å« HTTPS æ†‘è­‰æ”¯æ´ï¼š
- æ†‘è­‰ä½ç½®ï¼š`certs/` ç›®éŒ„
- è‡ªå‹•è¼‰å…¥ CA æ†‘è­‰
- æ”¯æ´æœ¬åœ° HTTPS é–‹ç™¼

## Web Component ä½¿ç”¨

### åŸºæœ¬ç”¨æ³•
```html
<!-- Modal æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰ -->
<x-elf-wrapper-modal 
  applyitem="your-form-config"
  backendurl="https://your-backend-url"
  buttontext="é–‹å•Ÿè¡¨å–®"
  buttonclass="btn btn-primary">
</x-elf-wrapper-modal>
```

### åƒæ•¸èªªæ˜
- `applyitem`: è¡¨å–®é…ç½®é …ç›®åç¨±
- `backendurl`: å¾Œç«¯ API ç¶²å€
- `buttontext`: è§¸ç™¼æŒ‰éˆ•æ–‡å­—ï¼ˆé è¨­ï¼šé–‹å•Ÿé é¢ï¼‰
- `buttonclass`: æŒ‰éˆ• CSS é¡åˆ¥ï¼ˆé è¨­ï¼šbtn btn-primaryï¼‰

## Chrome æ“´å……åŠŸèƒ½

è©³ç´°å®‰è£å’Œä½¿ç”¨èªªæ˜è«‹åƒè€ƒ [README-chrome-extension.md](README-chrome-extension.md)ã€‚

## API æ•´åˆ

### è¡¨å–®é…ç½® API
```
GET /api/setting/{formName}.json
```
è¿”å›æŒ‡å®šè¡¨å–®çš„ JSON é…ç½®æª”æ¡ˆã€‚

### é…ç½®æ ¼å¼
è¡¨å–®é…ç½®æ¡ç”¨ JSON æ ¼å¼ï¼Œæ”¯æ´å¤šç¨®è¡¨å–®å…ƒç´ å’Œé©—è­‰è¦å‰‡ã€‚

## é–‹ç™¼æ³¨æ„äº‹é …

### å®‰å…¨æ€§
- ä½¿ç”¨ Content Security Policy (CSP)
- é¿å…åœ¨ç¨‹å¼ç¢¼ä¸­æš´éœ²æ•æ„Ÿè³‡è¨Š
- æ”¯æ´ HTTPS é–‹ç™¼ç’°å¢ƒ

### æ•ˆèƒ½æœ€ä½³åŒ–
- Web Component ç¨ç«‹æ‰“åŒ…
- æŒ‰éœ€è¼‰å…¥çµ„ä»¶
- åœ–ç‰‡è³‡æºæœ€ä½³åŒ–

### ç›¸å®¹æ€§
- æ”¯æ´ç¾ä»£ç€è¦½å™¨
- Chrome æ“´å……åŠŸèƒ½ Manifest V3
- éŸ¿æ‡‰å¼è¨­è¨ˆ

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **æ†‘è­‰éŒ¯èª¤**ï¼šç¢ºèª `certs/` ç›®éŒ„ä¸­çš„æ†‘è­‰æª”æ¡ˆå­˜åœ¨
2. **æ¨¡çµ„è¼‰å…¥å¤±æ•—**ï¼šæª¢æŸ¥ `node_modules` æ˜¯å¦æ­£ç¢ºå®‰è£
3. **ç’°å¢ƒè®Šæ•¸æœªè¼‰å…¥**ï¼šç¢ºèªå°æ‡‰çš„ `.env` æª”æ¡ˆå­˜åœ¨

### åµéŒ¯å·¥å…·
- ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
- Chrome æ“´å……åŠŸèƒ½é–‹ç™¼è€…æ¨¡å¼
- Next.js å…§å»ºåµéŒ¯åŠŸèƒ½

## è²¢ç»æŒ‡å—

1. Fork å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯
3. æäº¤è®Šæ›´
4. å»ºç«‹ Pull Request

## æˆæ¬Šè³‡è¨Š

æœ¬å°ˆæ¡ˆç‚ºä¼æ¥­å…§éƒ¨ä½¿ç”¨ï¼Œä¿ç•™æ‰€æœ‰æ¬Šåˆ©ã€‚

---

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°ï¼Œè«‹è¯ç¹«é–‹ç™¼åœ˜éšŠã€‚