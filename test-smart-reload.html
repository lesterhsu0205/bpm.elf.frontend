<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ELF Web Component - æ™ºèƒ½é‡è¼‰æ¸¬è©¦</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f8f9fa;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }
    h2 {
      color: #495057;
      border-bottom: 2px solid #007bff;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    .test-group {
      margin-bottom: 30px;
      padding: 20px;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      background-color: #f8f9fa;
    }
    .test-title {
      font-weight: bold;
      margin-bottom: 15px;
      color: #495057;
    }
    .button-group {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    .note {
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      border-radius: 4px;
      padding: 12px;
      margin: 15px 0;
      color: #155724;
    }
    .warning {
      background-color: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 4px;
      padding: 12px;
      margin: 15px 0;
      color: #856404;
    }
    .info {
      background-color: #d1ecf1;
      border: 1px solid #b8daff;
      border-radius: 4px;
      padding: 12px;
      margin: 15px 0;
      color: #0c5460;
    }
    .control-panel {
      background-color: #f8f9fa;
      border: 2px solid #007bff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      max-width: 300px;
    }
    button {
      padding: 8px 16px;
      margin: 5px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn-primary { background-color: #007bff; color: white; }
    .btn-success { background-color: #28a745; color: white; }
    .btn-warning { background-color: #ffc107; color: black; }
    .btn-info { background-color: #17a2b8; color: white; }
    .btn-secondary { background-color: #6c757d; color: white; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§  ELF Web Component - æ¸¬è©¦</h1>

    <div class="control-panel">
      <h3>ğŸ›ï¸ å‹•æ…‹æ§åˆ¶é¢æ¿</h3>
      <div class="form-group">
        <label for="applyItemSelect">é¸æ“‡ applyitemï¼š</label>
        <select id="applyItemSelect">
          <option value="vm">vm (è™›æ“¬æ©Ÿ)</option>
          <option value="db">db (è³‡æ–™åº«)</option>
        </select>
      </div>
      
      <div class="button-group">
        <button class="btn-primary" onclick="updateModal()">ğŸ”„ æ›´æ–° Modal å±¬æ€§</button>
        <button class="btn-secondary" onclick="resetModal()">â†©ï¸ é‡ç½®ç‚ºé è¨­å€¼</button>
      </div>
    </div>

    <h2>ğŸ§ª æ¸¬è©¦æ¡ˆä¾‹</h2>
    
    <div class="test-group">
      <div class="test-title">æ¸¬è©¦ 1ï¼šåŸºç¤æ™ºèƒ½é‡è¼‰åŠŸèƒ½</div>
      <div class="button-group">
        <div id="dynamic-modal-container">
          <!-- å‹•æ…‹ Modal å°‡æ’å…¥æ­¤è™• -->
          <x-elf-wrapper-modal 
            id="test-modal"
            applyitem="vm"
            buttontext="ğŸ§ª æ™ºèƒ½æ¸¬è©¦ Modal"
            buttonclass="btn btn-primary btn-lg">
          </x-elf-wrapper-modal>
        </div>
      </div>
      
      <div class="info">
        <strong>ğŸ”¬ æ¸¬è©¦æ­¥é©Ÿï¼š</strong>
        <ol>
          <li><strong>é¦–æ¬¡é–‹å•Ÿ</strong>ï¼šé»æ“ŠæŒ‰éˆ•é–‹å•Ÿ Modalï¼Œè¼‰å…¥ vm æ•¸æ“š</li>
          <li><strong>å¡«å…¥è³‡æ–™</strong>ï¼šåœ¨è¡¨å–®ä¸­å¡«å…¥ä¸€äº›å…§å®¹ï¼ˆç‰¹åˆ¥æ˜¯ Description æ–‡å­—å€åŸŸï¼‰</li>
          <li><strong>é—œé–‰ Modal</strong>ï¼šé»æ“Šé—œé–‰æŒ‰éˆ•</li>
          <li><strong>é‡æ–°é–‹å•Ÿ</strong>ï¼šå†æ¬¡é»æ“ŠæŒ‰éˆ• â†’ <strong>æ‡‰è©²ä¿ç•™å¡«å…¥çš„å…§å®¹</strong></li>
          <li><strong>åˆ‡æ›é …ç›®</strong>ï¼šä½¿ç”¨ä¸Šæ–¹æ§åˆ¶é¢æ¿åˆ‡æ›åˆ° "db" â†’ <strong>æ‡‰è©²è¼‰å…¥æ–°æ•¸æ“šä¸¦é‡ç½®è¡¨å–®</strong></li>
          <li><strong>å†æ¬¡åˆ‡æ›å›ä¾†</strong>ï¼šåˆ‡æ›å› "vm" â†’ <strong>æ‡‰è©²é‡æ–°è¼‰å…¥ vm æ•¸æ“š</strong></li>
        </ol>
      </div>
    </div>
  </div>

  <script>
    // å‹•æ…‹æ›´æ–° Modal å±¬æ€§çš„åŠŸèƒ½
    function updateModal() {
      const modal = document.getElementById('test-modal');
      const applyItem = document.getElementById('applyItemSelect').value;
      
      console.log(`ğŸ”§ æ›´æ–° Modal å±¬æ€§:`, { applyItem });
      
      modal.setAttribute('applyitem', applyItem);
      
      // æ›´æ–°æŒ‰éˆ•æ¨£å¼è¡¨ç¤ºå·²æ›´æ–°
      const updateBtn = event.target;
      const originalText = updateBtn.textContent;
      updateBtn.textContent = 'âœ… å·²æ›´æ–°';
      updateBtn.style.backgroundColor = '#28a745';
      
      setTimeout(() => {
        updateBtn.textContent = originalText;
        updateBtn.style.backgroundColor = '#007bff';
      }, 1500);
    }
    
    function resetModal() {
      document.getElementById('applyItemSelect').value = 'vm';
      updateModal();
    }

    // é é¢è¼‰å…¥å®Œæˆæç¤º
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ§  æ™ºèƒ½é‡è¼‰æ¸¬è©¦é é¢è¼‰å…¥å®Œæˆï¼');
      
      // æª¢æŸ¥çµ„ä»¶è¨»å†Šç‹€æ…‹
      setTimeout(() => {
        const modalRegistered = !!customElements.get('x-elf-wrapper-modal');
        
        console.log('ğŸ“Š çµ„ä»¶è¨»å†Šç‹€æ…‹ï¼š');
        console.log('  - x-elf-wrapper-modal:', modalRegistered ? 'âœ…' : 'âŒ');
        
        if (modalRegistered) {
          console.log('ğŸ‰ Modal çµ„ä»¶å·²æˆåŠŸè¨»å†Šï¼å¯ä»¥é–‹å§‹æ¸¬è©¦æ™ºèƒ½é‡è¼‰åŠŸèƒ½');
        } else {
          console.warn('âš ï¸ Modal çµ„ä»¶æœªè¨»å†Šï¼Œè«‹æª¢æŸ¥è…³æœ¬è¼‰å…¥ç‹€æ…‹');
        }
      }, 1000);
    });

    // ç›£è½å±¬æ€§è®Šæ›´ï¼ˆç”¨æ–¼é™¤éŒ¯ï¼‰
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes') {
          console.log(`ğŸ” å±¬æ€§è®Šæ›´æª¢æ¸¬:`, {
            element: mutation.target.tagName,
            attribute: mutation.attributeName,
            newValue: mutation.target.getAttribute(mutation.attributeName)
          });
        }
      });
    });

    // é–‹å§‹è§€å¯Ÿå±¬æ€§è®Šæ›´
    setTimeout(() => {
      const modal = document.getElementById('test-modal');
      if (modal) {
        observer.observe(modal, { attributes: true });
      }
    }, 1000);
  </script>

  <!-- å¼•å…¥ ELF Web Component -->
  <script src="https://localhost:18843/bpm-elf/js/elf-webcomponent.js"></script>
</body>
</html> 
